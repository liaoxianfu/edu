<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liao.edu.service.mapper.CourseMapper">
    <select id="selectCourseById" parameterType="String" resultType="com.liao.edu.service.entity.Course">
        select id, teacher_id, subject_id, title, price, lesson_num, cover, buy_count, view_count, version, status,
        gmt_create, gmt_modified
        from edu_course
        where id=#{id}
    </select>



    <select id="selectCoursePublishVoByCourseId" resultType="com.liao.edu.service.entity.vo.CoursePublishVo">
        SELECT
        c.title,
        CONVERT(c.price, DECIMAL(8,2)) as price,
        c.cover,
        s1.title as subjectLevelTwo,
        s2.title as subjectLevelOne,
        COUNT( c.title ) as lessonPublishCount,
        c.lesson_num as lessonNum,
        t.`name` as teacherName
        FROM
        edu_course c
        LEFT JOIN edu_video v ON c.id = v.course_id
        LEFT JOIN edu_teacher t ON t.id = c.teacher_id
        LEFT JOIN edu_subject s1 ON s1.id = c.subject_id
        LEFT JOIN edu_subject s2 ON s1.parent_id = s2.id
        WHERE
        c.id = #{courseId}
    </select>

</mapper>
